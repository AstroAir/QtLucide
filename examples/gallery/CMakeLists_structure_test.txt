# QtLucide Gallery - Structure Test Build Configuration
#
# Simple test to validate the new directory structure and layout system

cmake_minimum_required(VERSION 3.16)

project(QtLucideGalleryStructureTest VERSION 2.0.0 LANGUAGES CXX)

# Set C++ standard
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

# Find Qt6 components
find_package(Qt6 REQUIRED COMPONENTS Core Widgets Gui)

# Enable Qt's MOC, UIC, and RCC
set(CMAKE_AUTOMOC ON)
set(CMAKE_AUTOUIC ON)
set(CMAKE_AUTORCC ON)

# Simple test sources - just the layout config and test main
set(STRUCTURE_TEST_SOURCES
    src/config/LayoutConfig.h
    src/main/main_structure_test.cpp
)

# Create the structure test executable
add_executable(QtLucideGalleryStructureTest ${STRUCTURE_TEST_SOURCES})

# Link Qt libraries
target_link_libraries(QtLucideGalleryStructureTest
    PRIVATE
        Qt6::Core
        Qt6::Gui
        Qt6::Widgets
)

# Set target properties
set_target_properties(QtLucideGalleryStructureTest PROPERTIES
    WIN32_EXECUTABLE TRUE
    MACOSX_BUNDLE TRUE
    OUTPUT_NAME "QtLucide Gallery Structure Test"
    CXX_STANDARD 17
    CXX_STANDARD_REQUIRED ON
    CXX_EXTENSIONS OFF
)

# Platform-specific configurations
if(WIN32)
    set_target_properties(QtLucideGalleryStructureTest PROPERTIES
        VS_DEBUGGER_WORKING_DIRECTORY "${CMAKE_CURRENT_BINARY_DIR}"
        WIN32_EXECUTABLE_ENABLE_EXPORTS TRUE
    )
    
    target_compile_definitions(QtLucideGalleryStructureTest PRIVATE
        WIN32_LEAN_AND_MEAN
        NOMINMAX
        UNICODE
        _UNICODE
    )
endif()

# Compiler-specific optimizations
if(CMAKE_CXX_COMPILER_ID STREQUAL "GNU" OR CMAKE_CXX_COMPILER_ID STREQUAL "Clang")
    target_compile_options(QtLucideGalleryStructureTest PRIVATE
        -Wall -Wextra -Wpedantic
        $<$<CONFIG:Release>:-O3 -DNDEBUG>
        $<$<CONFIG:Debug>:-g -O0>
    )
elseif(CMAKE_CXX_COMPILER_ID STREQUAL "MSVC")
    target_compile_options(QtLucideGalleryStructureTest PRIVATE
        /W4
        $<$<CONFIG:Release>:/O2 /DNDEBUG>
        $<$<CONFIG:Debug>:/Od /Zi>
    )
endif()

message(STATUS "QtLucide Gallery Structure Test configured successfully")
message(STATUS "  - New directory structure: ✓")
message(STATUS "  - Centralized layout system: ✓") 
message(STATUS "  - Responsive design utilities: ✓")
message(STATUS "  - Build target: QtLucideGalleryStructureTest")
